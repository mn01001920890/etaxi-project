<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"
  <title>ุงููุฏููุนุงุช</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="payments.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    body {
      margin: 0;
      font-family: "Lato", sans-serif;
    }
    /* ุงูุดุฑูุท ุงูุฌุงูุจู */
    .sidebar {
      margin: 0;
      padding: 0;
      width: 200px;
      background-color: #f8f9fa; /* ุฎูููุฉ ุฑูุงุฏูุฉ ูุงุชุญุฉ */
      position: fixed;
      top: 0;
      left: 0;
      height: 100%;
      overflow: auto;
    }
    .sidebar a {
      display: block;
      color: #000;
      padding: 16px;
      text-decoration: none;
    }
    .sidebar a.active {
      background-color: #04AA6D;
      color: white;
    }
    .sidebar a:hover:not(.active) {
      background-color: #555;
      color: white;
    }
    /* ุงููุญุชูู ุงูุฑุฆูุณู */
    .content {
      margin-left: 200px;
      padding: 16px;
    }
    /* ุงุณุชุนูุงู ุงููุณุงุฆุท ููุดุงุดุงุช <768px */
    @media screen and (max-width: 768px) {
      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
      }
      .sidebar a {
        float: left;
      }
      .content {
        margin-left: 0;
      }
    }
    /* ุงุณุชุนูุงู ุงููุณุงุฆุท ููุดุงุดุงุช <400px */
    @media screen and (max-width: 400px) {
      .sidebar a {
        float: none;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <div class="side-bar">
    <div class="side-header">
      <h2 class="side-title">๐ ุงููุฏููุนุงุช</h2>
    </div>
    <div class="nav-links">
      <a href="dashboard.html"><i class="fas fa-chart-bar"></i> ุงูุฑุฌูุน ููุตูุญุฉ ุงูุฑุฆูุณูุฉ</a>
      <a href="orders.html"><i class="fas fa-list"></i> ุงูุงูุชูุงู ูุตูุญุฉ ุงูุทูุจุงุช</a>
	  <button class="filter-btn" id="ordersBtn"><i class="fas fa-credit-card"></i> ุนุฑุถ ูุฏููุนุงุช ุงูููู</button>
    </div>
    <div class="filters">
      <input type="date" id="dateFrom" placeholder="ูู ุชุงุฑูุฎ">
      <input type="date" id="dateTo" placeholder="ุฅูู ุชุงุฑูุฎ">
      <button class="filter-btn" id="filterBtn"><i class="fas fa-filter"></i> ุงุตุฏุฑ ุจุญุซ</button>
    </div>
    <button class="export-btn" id="exportBtn"><i class="fas fa-file-excel"></i> ุชุตุฏูุฑ ุฅูุณู</button>
    <div class="pagination-controls">
      <label for="pageSizeSelect">ุนุฏุฏ ุงููุชุงุฆุฌ:</label>
		  <select id="pageSizeSelect"></select>
      <button id="prevPage">ุงูุงูุชูุงู ููุตูุญุฉ ุงูุงุญุฏุซ</button>
      <button id="nextPage">ุงูุงูุชูุงู ููุตูุญุฉ ุงูุงูุฏู </button>
    </div>
  </div>

  <div class="main-content">
    <div class="count-box" id="countBox"></div>
    <div id="paymentsContainer">
      <table id="paymentsTable">
        <thead>
          <tr>
		  <th onclick="toggleFilterMenu(this, 0)">ุฑูู ุงูุฏูุน<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 1)">ุงููุจูุบ<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 2)">ุงูุถุฑูุจุฉ<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 3)">ุทุฑููุฉ ุงูุฏูุน<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 4)">ุชุงุฑูุฎ ุงูุฅูุดุงุก<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 5)">ุงุณู ุงูุณุงุฆู<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 6)">ุฑูู ุงูุณูุงุฑุฉ<span class="filter-indicator"></span></th>
		  <th onclick="toggleFilterMenu(this, 7)">ุงุณู ุงูุดุฑูุฉ<span class="filter-indicator"></span></th>
		</tr>
				  
        </thead>
        <tbody id="paymentsBody">
          <!-- ุงูุจูุงูุงุช ุชูููุฃ ุฏููุงููููุงู -->
        </tbody>
      </table>
	  <div id="filterMenu" style="display:none; position:absolute; background:white; border:1px solid #ccc; z-index:10000; padding:10px; border-radius:6px;"></div>
      <div class="empty-message" id="emptyMessage" style="display:none"> ุงูุชุธุฑ ุฌุงุฑู ุงุญุถุงุฑ ุงูุจูุงูุงุช</div>
    </div>
  </div>

  <script>
    document.querySelectorAll('.col-toggle').forEach(checkbox => {
      checkbox.addEventListener('change', () => {
        const colIndex = parseInt(checkbox.getAttribute('data-col'));
        const visible = checkbox.checked;

        document.querySelectorAll(`#paymentsTable tr`).forEach(row => {
          const cell = row.cells[colIndex];
          if (cell) cell.style.display = visible ? '' : 'none';
        });
      });
    });
	
	function toggleFilterMenu(th, colIndex) {
	  const menu = document.getElementById('filterMenu');
	  const rect = th.getBoundingClientRect();

	  // ุฌูุน ุงูููู ุงููุฑูุฏุฉ
	  const values = [...new Set([...document.querySelectorAll(`#paymentsTable tbody tr`)]
		.map(row => row.cells[colIndex]?.innerText.trim())
		.filter(Boolean))];

	  // ุจูุงุก ุงููุงุฆูุฉ
	  menu.innerHTML = `<strong>ุงุฎุชุฑ ููุชุฑ:</strong><br><div style="margin-bottom: 5px; cursor: pointer; color: red;" onclick="clearFilter(${colIndex})">โ ุฅุฒุงูุฉ ุงูููุชุฑ</div>`;
	  
	  values.forEach(value => {
		const option = document.createElement('div');
		option.textContent = value;
		option.style.cursor = 'pointer';
		option.style.padding = '4px 0';
		option.onclick = () => applyFilter(colIndex, value);
		menu.appendChild(option);
	  });

	  menu.style.left = `${rect.left}px`;
	  menu.style.top = `${rect.bottom + window.scrollY}px`;
	  menu.style.display = 'block';
	}
	
	function applyFilter(colIndex, filterValue) {
	  const rows = document.querySelectorAll(`#paymentsTable tbody tr`);
	  rows.forEach(row => {
		const cellText = row.cells[colIndex]?.innerText.trim();
		row.style.display = (cellText === filterValue) ? '' : 'none';
	  });

	  // ุชุญุฏูุซ ุงูุณูู
	  document.querySelectorAll('#paymentsTable thead th .filter-indicator').forEach(e => e.textContent = '');
	  document.querySelector(`#paymentsTable thead th:nth-child(${colIndex + 1}) .filter-indicator`).textContent = ' ๐ฝ';

	  document.getElementById('filterMenu').style.display = 'none';
	}
	
	function clearFilter(colIndex) {
	  const rows = document.querySelectorAll(`#paymentsTable tbody tr`);
	  rows.forEach(row => row.style.display = '');

	  // ุฅุฒุงูุฉ ุณูู ุงูููุชุฑุฉ
	  document.querySelectorAll('#paymentsTable thead th .filter-indicator').forEach(e => e.textContent = '');

	  // ุฅุบูุงู ุงููุงุฆูุฉ
	  document.getElementById('filterMenu').style.display = 'none';
	}
	

		  // ๐ ููุน ูููู ูููู
		  document.addEventListener('contextmenu', function (e) {
			e.preventDefault();
		  });

		  // ๐ ููุน ููุงุชูุญ ุงูุฃุฏูุงุช ุงููุดููุฑุฉ ูููุทูุฑูู
		  document.addEventListener('keydown', function (e) {
			// F12
			if (e.key === "F12") {
			  e.preventDefault();
			}

			// Ctrl + Shift + I ุฃู Ctrl + Shift + J ุฃู Ctrl + U
			if ((e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || 
				(e.ctrlKey && e.key === 'U')) {
			  e.preventDefault();
			}
		  });

  </script>
</body>
</html>
